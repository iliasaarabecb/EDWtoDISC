<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="The EDWtoDISC package is used to initialize and maintain the EDW Data Production Pipeline 2021 which pushes deal submissions stored in EDW's database to a Parquet optimized table within DISC, leveraging HDFS and queryable through Imapala."><meta name=author content="Ilias Aarab"><link href=https://bitbucket.ecb.de/users/aarabil/repos/edwtodisc/browse/command-line-tool/ rel=canonical><link rel=icon href=../assets/favicon.png><meta name=generator content="mkdocs-1.4.2, mkdocs-material-7.1.8"><title>Command Line Tool - EDWtoDISC</title><link rel=stylesheet href=../assets/stylesheets/main.ca7ac06f.min.css><link rel=stylesheet href=../assets/stylesheets/palette.f1a3b89f.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style><link rel=stylesheet href=../assets/_mkdocstrings.css><meta property=og:type content=website><meta property=og:title content="EDWtoDISC - Command Line Tool"><meta property=og:description content="The EDWtoDISC package is used to initialize and maintain the EDW Data Production Pipeline 2021 which pushes deal submissions stored in EDW's database to a Parquet optimized table within DISC, leveraging HDFS and queryable through Imapala."><meta content=https://bitbucket.ecb.de/users/aarabil/repos/edwtodisc/browse/command-line-tool/ property=og:url><meta property=og:image content=https://bitbucket.ecb.de/users/aarabil/repos/edwtodisc/browse/assets/images/banner.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1080><meta property=og:image:height content=568><link rel=stylesheet href=../overrides/assets/stylesheets/main.90c53ea0.min.css></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#command-line-tool class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-announce> <div class="md-announce__inner md-grid md-typeset"> </div> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title=EDWtoDISC class="md-header__button md-logo" aria-label=EDWtoDISC data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 89 89"> <path d=M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z /> <path d=M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z style="fill-opacity: 0.5"/> <path d=M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z /> <path d=M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z style="fill-opacity: 0.25"/> </svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> EDWtoDISC </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Command Line Tool </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7 10a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2m10-3a5 5 0 0 1 5 5 5 5 0 0 1-5 5H7a5 5 0 0 1-5-5 5 5 0 0 1 5-5h10M7 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3h10a3 3 0 0 0 3-3 3 3 0 0 0-3-3H7z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=red data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg> </label> </form> <div class=md-header__source> <a href=https://gitlab.sofa.dev/Ilias.Aarab/EDWtoDISC title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> Gitlab/EDWtoDISC </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../getting-started/ class="md-tabs__link md-tabs__link--active"> Getting started </a> </li> <li class=md-tabs__item> <a href=../docstrings/PDP/ class=md-tabs__link> Code Reference </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title=EDWtoDISC class="md-nav__button md-logo" aria-label=EDWtoDISC data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 89 89"> <path d=M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z /> <path d=M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z style="fill-opacity: 0.5"/> <path d=M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z /> <path d=M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z style="fill-opacity: 0.25"/> </svg> </a> EDWtoDISC </label> <div class=md-nav__source> <a href=https://gitlab.sofa.dev/Ilias.Aarab/EDWtoDISC title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> Gitlab/EDWtoDISC </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2> Getting started <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Getting started" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../getting-started/ class=md-nav__link> Installation </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <a href=./ class="md-nav__link md-nav__link--active"> Command Line Tool </a> </li> <li class=md-nav__item> <a href=../jupyter-notebook/ class=md-nav__link> Jupyter Notebook </a> </li> <li class=md-nav__item> <a href=../ide/ class=md-nav__link> IDE </a> </li> <li class=md-nav__item> <a href=../troubleshooting/ class=md-nav__link> Troubleshooting </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Code Reference <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Code Reference" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Code Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../docstrings/PDP/ class=md-nav__link> PDP </a> </li> <li class=md-nav__item> <a href=../docstrings/CreateBackups/ class=md-nav__link> CreateBackups </a> </li> <li class=md-nav__item> <a href=../docstrings/CreateDictionaries/ class=md-nav__link> CreateDictionaries </a> </li> <li class=md-nav__item> <a href=../docstrings/CreateTables/ class=md-nav__link> CreateTables </a> </li> <li class=md-nav__item> <a href=../docstrings/EDWSubmissionTracker/ class=md-nav__link> EDWSubmissionTracker </a> </li> <li class=md-nav__item> <a href=../docstrings/InitializeClients/ class=md-nav__link> InitializeClients </a> </li> <li class=md-nav__item> <a href=../docstrings/InitializeProxyServer/ class=md-nav__link> InitializeProxyServer </a> </li> <li class=md-nav__item> <a href=../docstrings/Preprocesser/ class=md-nav__link> Preprocesser </a> </li> <li class=md-nav__item> <a href=../docstrings/ToDISC/ class=md-nav__link> ToDISC </a> </li> <li class=md-nav__item> <a href=../docstrings/ToNameSpace/ class=md-nav__link> ToNameSpace </a> </li> <li class=md-nav__item> <a href=../docstrings/UpdateDeals/ class=md-nav__link> UpdateDeals </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=command-line-tool>Command Line Tool<a class=headerlink href=#command-line-tool title="Permanent link">&para;</a></h1> <p>EDWtoDISC comes equiped with an easy to utilize command line interface: <code>EDWtoDISC--run-pipelines</code>. The cmi allows the user to easily and quickly run data pipelines in production and update their DISC tables. </p> <h1 id=arguments>Arguments<a class=headerlink href=#arguments title="Permanent link">&para;</a></h1> <ul> <li><code>-tr --testrun</code>: Whether the user wants to run a testrun to examine whether the pipelines work properly.</li> <li><code>-dl --datalab</code>: the datalab to create tables in, must exist within DISC. Default: lab_org_esrb.</li> <li><code>-abs --abs-typ</code>:e Asset backed security type. Default: rmbs.</li> <li><code>-level --data-level</code>: Either loan-level data (lld) or bond-level data. Currently only supports lln.</li> <li><code>-n --new-tables</code>: Whether to delete existing tables in DISC and create new ones (<strong>not recommended!</strong>). Without the arg run-pipelines will update the existing tables in case new deal submissions have been found at EDWs database that are not yet stored in DISC. </li> <li><code>-tracker --darwin-tracker</code>: Whether to utilize disc submission tracker stored in DARWIN.</li> <li><code>-darwin --darwin-folder</code>: Darwin folder to backup tracker. In case -tracker flag is used, the folder is also used to find an existing tracker. Requires following additional input: darwin_root_folder_id - node of the root folder (last set of digits of the DARWIN folder URL) darwin_sub_folder - subfoler of the root folder containing the tracker file. </li> <li><code>-c --cont</code>: run pipelines with -c to continue pipelines from last run. Used in case previous exited pipelines unexpectedly.</li> </ul> <h1 id=workflow-example>Workflow example<a class=headerlink href=#workflow-example title="Permanent link">&para;</a></h1> <h2 id=creating-new-tables>Creating new tables<a class=headerlink href=#creating-new-tables title="Permanent link">&para;</a></h2> <p>Make sure you are located in the conda environment where EDWtoDISC is installed (called 'edw' in the below example). <code>EDWtoDISC--run-pipelines -h</code> gives you an overview of all the available arguments. To initialize a new set of producion pipelines, and a new accompanying DISC table, to get rmbs loan-level data from EDW into DISC we run the following arguments:</p> <ul> <li><code>-abs</code> rmbs #rmbs deals</li> <li><code>-level</code> lln #loan level data </li> <li><code>-dl</code> lab_org_esrb #the ESRB datalab</li> <li><code>-n</code> #To create new DISC tables</li> <li><code>-darwin 290298255 EDWtoDISC</code> #The rootnode and subfolder to upload our tracker to</li> </ul> <p>In the below example the argument <code>-tr</code> is also called which activates a testrun that is used for either demonstration purposes or to test the pipelines out. After running the command, the interface prompts the user to pass in the login information to EDWs database (can be requested through Market Data Services). Afterwards, the interface will start collecting metadata from EDW and start pulling deals from EDW into DISC.</p> <p><img alt=CMI src=../assets/gifs/cmi.gif></p> <h2 id=updating-existing-tables>Updating existing tables<a class=headerlink href=#updating-existing-tables title="Permanent link">&para;</a></h2> <p>Make sure you are located in the conda environment where EDWtoDISC is installed (called 'edw' in the below example). <code>EDWtoDISC--run-pipelines -h</code> gives you an overview of all the available arguments. To update a set of existing producion pipelines, and an existing DISC table storing rmbs loan-level data from EDW into DISC we run the following arguments:</p> <ul> <li><code>-abs</code> rmbs #rmbs deals</li> <li><code>-level</code> lln #loan level data </li> <li><code>-dl</code> lab_org_esrb #the ESRB datalab</li> <li><code>-tracker</code> #Update table based on tracker</li> <li><code>-darwin 290298255 EDWtoDISC</code> #The rootnode and subfolder to upload our tracker to</li> </ul> <p><img alt=CMI src=../assets/gifs/cmi_updateTables.gif></p> <h2 id=continue-from-previous-run>Continue from previous run<a class=headerlink href=#continue-from-previous-run title="Permanent link">&para;</a></h2> <p>In case the pipelines get interupted for some reason when running in production, the user can easily re-establish a connection by running <code>EDWtoDISC--run-pipelines --cont</code> which will continue the pipelines from the last deal submission encountered during the previous run (<code>--cont</code> still requires the user to re-input login details to EDW for security reasons).</p> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../getting-started/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Installation" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Installation </div> </div> </a> <a href=../jupyter-notebook/ class="md-footer__link md-footer__link--next" aria-label="Next: Jupyter Notebook" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Jupyter Notebook </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2020 - 2021 Ilias Aarab </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["content.tabs.link", "navigation.sections", "navigation.tabs", "navigation.tracking", "search.highlight", "search.share", "search.suggest"], "search": "../assets/javascripts/workers/search.00c949be.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": null}</script> <script src=../assets/javascripts/bundle.82b56eb2.min.js></script> <script src=../overrides/assets/javascripts/bundle.09b22c43.min.js></script> </body> </html>